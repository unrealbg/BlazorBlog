<!DOCTYPE html>
@code {
    [CascadingParameter]
    private HttpContext? HttpContext { get; set; }
    private bool IsDarkServer => string.Equals(HttpContext?.Request.Cookies["theme"], "dark", StringComparison.OrdinalIgnoreCase);
}
<html lang="en" class="@(IsDarkServer ? "dark" : null)">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <base href="/" />

    <script>
        (() => {
            try {
                const cookieTheme = document.cookie.split('; ').find(x => x.startsWith('theme='))?.split('=')[1];
                const stored = localStorage.getItem('theme') || cookieTheme;
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                if (stored === 'dark' || (!stored && prefersDark)) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            } catch { /* no-op */ }
        })();
    </script>

    <!-- Load component styles first -->
    <link rel="stylesheet" href="BlazorBlog.styles.css" />
    <link rel="stylesheet" href="app.css" />

        <!-- Inter font -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
        <style>
            html { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
        </style>

    <link rel="icon" type="image/png" href="favicon.png" />

    <HeadOutlet />
</head>

<body class="min-h-screen flex flex-col bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-100 selection:bg-brand-500/20">
    <CascadingAuthenticationState>
        <div class="flex-1 flex flex-col min-h-0">
            <Routes />
        </div>
    </CascadingAuthenticationState>
    <!-- Theme helpers (menu/theme toggles) -->
    <script src="assets/js/functions.js" type="text/javascript"></script>

    <SectionOutlet SectionName="scripts" />

    <!-- Blazor Scripts -->
    <script src="_framework/blazor.web.js"></script>
</body>

</html>
