@page "/Account/ForgotPassword"

<PageTitle>@Utils.GetPageTitle("Forgot password")</PageTitle>

<style>
    .login-viewport {
        min-height: calc(100vh - 250px);
        display: grid;
        place-items: center;
        padding: 2rem 1rem;
        background: var(--lightblue, #f8f9fb);
    }
    .login-card {
        width: min(480px, 94vw);
        background: var(--white, #fff);
        border: 1px solid var(--gray, #e5e7eb);
        border-radius: 10px;
        box-shadow: var(--box-shadow-lg, 0 10px 25px rgba(0,0,0,.08));
        padding: 0 1.25rem 1.1rem 1.25rem;
        position: relative;
    }
    .login-card::before{
        content: "";
        position: absolute; inset: 0 0 auto 0;
        height: 4px;
        border-top-left-radius: 10px; border-top-right-radius: 10px;
        background: linear-gradient(90deg, var(--primary,#03a87c), color-mix(in srgb, var(--primary,#03a87c) 65%, #09ebaf));
    }
    .login-header { margin: 1rem 0 .75rem 0; }
    .login-title { font-weight: 700; font-size: 1.15rem; margin: 0; }
    .login-sub { color: #6c757d; margin: .25rem 0 0 0; font-size: .95rem; }
    .input-wrap { position: relative; }
    .form-label { font-weight: 600; margin-bottom: .35rem; }
    .form-control.login-input { border-radius: 10px; background-color: color-mix(in srgb, var(--primary,#03a87c) 5%, #fff); }
    .form-control.login-input::placeholder{ color: #9aa2a9; }
    .form-control.login-input:focus { border-color: var(--primary, #03a87c); box-shadow: 0 0 0 0.2rem color-mix(in srgb, var(--primary,#03a87c) 25%, transparent); background-color: color-mix(in srgb, var(--primary,#03a87c) 9%, #fff); }
    .divider { height:1px; background:#e5e7eb; margin:.75rem 0; }
    .err { color:#e50000; margin:.25rem 0 .5rem 0; }
    .btn.login-btn { color: #fff; background: linear-gradient(180deg, color-mix(in srgb, var(--primary,#03a87c) 94%, #fff), var(--primary,#03a87c)); border-color: var(--primary, #03a87c); border-radius: 10px; }
    .btn.login-btn:hover { filter: brightness(.98); }
    .btn.login-btn:disabled { opacity: .75; }
    .link { color: var(--primary, #03a87c); text-decoration:none; }
    .link:hover { text-decoration:underline; }
    @@media (max-width: 480px) { .login-card { padding: 1rem; } }
</style>

<div class="login-viewport">
    <div class="login-card">
        <div class="login-header">
            <h1 class="login-title">Forgot password</h1>
            <p class="login-sub">Enter your email to receive a password reset link.</p>
        </div>
        <StatusMessage Message="@_statusMessage" />

        <EditForm Model="Input" method="post" OnValidSubmit="SendResetAsync" FormName="forgot-password">
            <DataAnnotationsValidator />
            <ValidationSummary class="err" role="alert" />

            <div class="input-wrap mb-3">
                <label for="email" class="form-label">Email</label>
                <InputText id="email" @bind-Value="Input.Email" class="form-control login-input" autocomplete="username" aria-required="true" placeholder="name@example.com" />
                <ValidationMessage For="() => Input.Email" class="err" />
            </div>

            <div class="divider"></div>

            <button type="submit" class="w-100 btn login-btn">Send reset link</button>
            <div class="mt-3">
                <a href="/Account/Login" class="link">Back to login</a>
            </div>

            @if (_devResetUrl is not null)
            {
                <div class="mt-3" style="padding:.75rem; border:1px dashed #9aa2a9; border-radius:8px; background:#f7fafc; color:#334155;">
                    <strong>Development only:</strong>
                    <div style="margin-top:.5rem; word-break: break-all;">
                        Reset link: <a href="@_devResetUrl" class="link">@_devResetUrl</a>
                    </div>
                    <div style="margin-top:.5rem; word-break: break-all;">
                        Token: <code>@_devToken</code>
                    </div>
                </div>
            }
        </EditForm>
    </div>
</div>
