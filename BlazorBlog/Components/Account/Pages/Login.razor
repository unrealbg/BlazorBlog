@page "/Account/Login"

<PageTitle>@Utils.GetPageTitle("Login")</PageTitle>

<div class="bg-slate-50 dark:bg-slate-950/40">
    <div class="mx-auto grid min-h-[calc(100vh-250px)] place-items-center px-4 py-8 sm:px-6 lg:px-8">
        <div class="relative w-full max-w-md rounded-xl border border-slate-200/60 bg-white p-5 shadow-soft dark:border-slate-800 dark:bg-slate-900">
            <div class="mb-4">
                <h1 class="text-xl font-bold text-slate-900 dark:text-slate-100">Welcome back</h1>
                <p class="mt-1 text-sm text-slate-600 dark:text-slate-300">Sign in to continue</p>
            </div>
        <StatusMessage Message="@_errorMessage" />
        <EditForm Model="Input" method="post" OnValidSubmit="PerformLoginAsync" FormName="login">
            <DataAnnotationsValidator />
            <ValidationSummary class="text-red-600" role="alert" />

            <div class="mb-4">
                <label for="email" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200">Email</label>
                <InputText id="email" @bind-Value="Input.Email" class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 pr-12 text-sm text-slate-900 shadow-sm placeholder-slate-400 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100" autocomplete="username" aria-required="true" placeholder="name@example.com" />
                <ValidationMessage For="() => Input.Email" class="text-red-600" />
            </div>

            <div class="mb-4">
                <label for="password" class="mb-1 block text-sm font-medium text-slate-700 dark:text-slate-200">Password</label>
                <div class="relative">
                    <InputText id="password" type="@(_showPassword ? "text" : "password")" @bind-Value="Input.Password" @bind-Value:event="oninput" class="w-full rounded-lg border border-slate-300 bg-white px-3 py-2 pr-12 text-sm text-slate-900 shadow-sm placeholder-slate-400 focus:border-brand-500 focus:outline-none focus:ring-1 focus:ring-brand-500 dark:border-slate-700 dark:bg-slate-800 dark:text-slate-100" autocomplete="current-password" aria-required="true" placeholder="••••••••" />
                    <button type="button" class="absolute right-1.5 top-1/2 -translate-y-1/2 inline-flex h-9 w-9 items-center justify-center rounded-md text-slate-500 hover:text-brand-600 focus:outline-none focus:ring-2 focus:ring-brand-500" title="Toggle password visibility" aria-pressed="@_showPassword" aria-label="@(_showPassword ? "Hide password" : "Show password")" @onclick="ToggleShowPassword">
                    @if (_showPassword)
                    {
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M2 5l17 17-1.5 1.5L16 20.5A13.9 13.9 0 0112 21C7 21 2.7 17.9 1 14c.7-1.5 1.8-2.9 3.1-4.1L.5 6.5 2 5zM7 9l2.2 2.2a5 5 0 016.6 6.6L18 19a12 12 0 003-5c-1.7-3.9-6-7-11-7-1.1 0-2.1.1-3 .3z"/></svg>
                    }
                    else
                    {
                        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true"><path d="M12 5C7 5 2.7 8.1 1 12c1.7 3.9 6 7 11 7s9.3-3.1 11-7c-1.7-3.9-6-7-11-7zm0 12a5 5 0 115-5 5 5 0 01-5 5z"/></svg>
                    }
                    </button>
                </div>
                <ValidationMessage For="() => Input.Password" class="text-red-600" />
            </div>

            <div class="mb-4 flex items-center justify-between gap-2">
                <label class="inline-flex items-center gap-2 text-sm text-slate-700 dark:text-slate-300">
                    <InputCheckbox id="rememberMe" @bind-Value="Input.RememberMe" />
                    Remember me
                </label>
                <a href="/Account/ForgotPassword" class="text-sm text-brand-600 hover:underline" title="Forgot password?">Forgot password?</a>
            </div>

            <div class="my-3 h-px bg-slate-200/80 dark:bg-slate-800"></div>

            <button type="submit" class="inline-flex w-full items-center justify-center rounded-lg bg-brand-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-brand-700 disabled:opacity-75" disabled="@_isSubmitting">
                @if (_isSubmitting)
                {
                    <span class="mr-2 inline-block h-4 w-4 animate-spin rounded-full border-2 border-brand-300 border-t-white"></span>
                }
                <span>Log in</span>
            </button>
        </EditForm>
        </div>
    </div>
</div>